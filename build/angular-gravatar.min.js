angular.module("ui.gravatar",["md5"]).provider("gravatarService",function(){var a,b,c;return b=this,a=/^[0-9a-f]{32}$/i,c=function(a){var b,c,d;c=[];for(b in a)d=a[b],c.push(""+b+"="+escape(d));return c.join("&")},this.defaults={},this.secure=!1,this.$get=["md5",function(d){return{url:function(e,f){var g,h,i;return null==e&&(e=""),null==f&&(f={}),f=angular.extend(angular.copy(b.defaults),f),i=b.secure?"https://secure":"http://www",e=a.test(e)?e:d(e),h=[i,".gravatar.com/avatar/",e],g=c(f),g.length>0&&h.push("?"+g),h.join("")}}}],this}).directive("gravatarSrc",["gravatarService",function(a){var b;return b=function(a,b){var c,d,e;d={};for(c in b)e=b[c],0===c.indexOf(a)&&(c=c.substr(a.length).toLowerCase(),c.length>0&&(d[c]=e));return d},{restrict:"A",link:function(c,d,e){var f;return f=b("gravatar",e),delete f.src,c.$watch(e.gravatarSrc,function(b){return d.attr("src",a.url(b,f))})}}}]);